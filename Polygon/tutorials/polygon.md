## Система подготовки задач Polygon

Официальный адрес: [polygon.codeforces.com](polygon.codeforces.com)

Система разработана командой сайта [Codeforces](https://codeforces.com/).

Импорт задач из Polygon поддерживается многими тестирующими системами.

## Основные разделы задачи в Polygon

### General info

- Настройки ввода/вывода (консоль / файлы);

- Настройки TL / ML.

  - Настройки общие для всех языков.
  - Codeforces поддерживает множители ограничений в мешапах / группах.
    
- Флаг интерактивности (добавляет раздел Interactor).

- Advanced-настройки:

  - Очень специфичные настройки;
  
  - Актуальными являются функции копирования и переименования.

### Statement

- Основные блоки условия

  - Легенда;
  
  - Ввод;
  
  - Вывод;
  
  - Примечание;
  
  - Разбалловка (опциональная, нужна для задач с частичными баллами);
  
  - Разбор (не показывается в условии по очевидным причинам).

- Используется LaTex;

  - Доступен список основных LaTex - команд (очень полезно).

- Не забываем **жать “Save”** после изменений.

- Внизу загружаются ресурсы для компиляции условия (обычно изображения).

- Поддерживается режим preview (ctrl + enter).

### Files

- Содержит все служебные файлы (НЕ решения);

- Resource files

  - Заголовочные и другие файлы для компиляции основных файлов (включая компиляцию решений).
  
  - testlib.h
  
      - Обязательно жмем “auto-update”;
  
      - Открываем в режиме “View / Edit” и поиском ищем нужные функции.

  - Также файлы с настройками LaTex

- Source files

  - Валидатор;
  
  - Чекер;
  
  - Генераторы.

    - Есть ссылка на примеры / инструкцию про генераторы.

- Attachments

  - Все, что не относится ни к одной вышеописанной категории.

### Checker

- Есть много стандартных

  - Для целых чисел - ncmp;
  
  - Для длинной арифметики - hcmp;
  
  - Для вещественных - rcmp;
  
  - Для yes/no - yesno / nyesno;
  
  - Для строковых токенов - wcmp;
  
  - Для строк - lcmp (игнорит пробелы) / fcmp (не игнорит пробелы).

- Для стандартных жмем “auto-update”;

- Для собственных чекеров добавляем **тесты**

  - Ввод / вывод участника / ответ жюри
  
  - Правильный ответ жюри можно сгенерировать из main correct;
  
  - Если делаем тест на WA / PE участника - делаем аналогичный на Crash жюри.

- Есть ссылки на примеры.

  - В том числе исходный код стандартных.

### Validator

- Добавляем тесты

  - Добавляем семплы как корректные;
  
  - Подавляющее большинство тестов должно быть пограничным;
  
  - ОК-тесты могут объединять несколько пограничных проверок;
  
  - FAIL-тесты должны проверять ровно одну границу (на +-1 от ОК)

- Есть ссылки на примеры.

### Tests

- Ответы генерятся запуском Main Correct (см. Solution files)

- Тесты и ответы смотрим в Preview tests.

  - В том числе показывает ошибки валидации и генерации;

- НЕ грузим тесты из файлов;

- Семплы добавляются обязательно руками;

- Каждый запуск цепочки генераторов создает ровно один тест;

- Поддерживается синтаксис Freemarker

  - [Ссылка](./tutorials/freemarker.md) на небольшой гайд по Freemarker для Polygon.

- Не используйте магических констант;

- Все лимиты зафиксированы в переменных;

- Имена генераторов - тоже в переменные.

### Stresses

- Запуск решений на множестве сгенерированных тестов;

- Требует написанный генератор;

- Скрипт запуска аналогичен скрипту в Tests;

  - Приведен разъясняющий пример.

### Solution files

- Предлагаемый шаблон названий: <verdict><language><description>_<author>.<extension>:

  - verdict - ok / tl / wa / re или комбинации;
  
  - language - обычно дублирует extension;
  
  - Polygon игнорирует extension при сравнении имен файлов;
  
  - description - по сути теги решения;
  
  - author - краткий псевдоним;

- Обязательно будет один Main correct - является эталоном для генерации ответов на тесты;

- Стараемся делать OK на все различные идеи решений;

  - Обычно нежелательно слишком оптимизировать константу;
  
  - Желательно иметь решение без оптимизации ввода/вывода (может быть “TL или OK”);

- Стараемся делать WA на все возможные опечатки / +-1 / ошибки в неравенствах;

  - Если решение не проходит семплы, то оставляем только в случае, если проходит практически все тесты;

- Стараемся добавить TL на самом быстром языке;

  - Все доступные ускорения ввода/вывода;
  
  - Прагмы (для С++);
  
  - Всевозможные эвристики / отсечения.

- При разных неверных вердиктах ставим Incorrect.

### Invocations

- Запускает решение на всех тестах (независимо от вердиктов);

- Показывает следующие проблемы

  - ОК слишком близко к лимитам;
  
  - TL / ML слишком близко к лимитам (с внешней стороны);
  
  - Нет тестов с пограничными значениями входных данных;
  
    - Использует информацию из валидатора.

### Issues

- Любые идеи генераторов / тестов;

- Любые идеи решений (на любой вердикт);

- Аспекты чекера / валидатора.

### Commit

- Сохраняет все произведенные изменения;
  
- Ставим галку "Don't send email notifications"

- Для отмены изменений используется Discard

  - Расположена в списке задач.

- Для обновления до последней версии - Update working copy.

### Packages

- Сборка пакета для импорта в тестирующие системы;

  - Не работает, если есть незакоммиченные изменения;

- Запускаем с верификацией

  - Верификация запускает ВСЕ решения на ВСЕХ тестах;

  - Падает, если решение не соответствует вердикту.

- Standard-версия не содержит сгенерированных тестов.

  - Актуальна для Codeforces.

- Full-версия содержит сгенерированные тесты.

  - Актуальна для переноса в другие системы.
  - Windows / Linux отличаются переносами строк.

### Manage Access

- Write - можно всё;

- Read - нельзя коммитить;

- Есть доп.  роли, но они неактуальны.

## Соревнование в Polygon

- Создаем через New Contest

- Добавляем отдельные задачи из списка;

  - Или создаем задачу прямо из меню соревнования;

- Выдаем авторам роль Write сразу на все задачи;

- Позволяет производить “оптовые” операции со всеми задачами.
